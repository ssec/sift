language: python
matrix:
  include:
  - os: windows
    env: PYTHON_VERSION=3.7
    language: c
install:
- choco install miniconda3 --params="'/AddToPath:1'"
- choco install directx
- /c/tools/miniconda3/scripts/conda init bash
- source "/c/Users/travis/.bash_profile"
- conda activate base
- conda config --set channel_priority flexible
- conda config --set always_yes True
- conda create -n test python=3.7 pyqt
- conda activate test
- curl -LO https://download.sysinternals.com/files/ProcessMonitor.zip
- unzip ProcessMonitor.zip
script:
- ./procmon //AcceptEula //Quiet //Minimized //BackingFile sift_error.pml & (until test -f *.pml; do sleep 1; done)
#- curl -Lo Dependencies.zip https://github.com/lucasg/Dependencies/releases/download/v1.10/Dependencies_x64_Release.zip
#- unzip Dependencies.zip
#- ./Dependencies.exe -chain /c/tools/miniconda3/envs/test/lib/site-packages/PyQt5/QtWebEngineWidgets.pyd
- python -c "from PyQt5.QtWebEngineWidgets import QWebEngineView"
- ./procmon //Terminate
- choco install lftp
- lftp -e "cd pub/incoming; put sift_error_$(date +%Y%m%d_%H%M%S).pml; exit" -u ftp,davidh ftp.ssec.wisc.edu
